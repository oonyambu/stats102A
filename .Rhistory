`names<-`(list(10,20),c(1,2))
read.table(text=readClipboard(),sep="|")
read.table(text=readClipboard(),sep="|",skipNul = TRUE)
read.table(text=readClipboard(),sep="|",skip2)
read.table(text=readClipboard(),sep="|",skip=2)
read.table(text=readClipboard(),sep="|")
read.table(text=readClipboard(),sep="|",h=TRUE,)
df <- read.table(text=readClipboard(),sep="|",h=TRUE,)
df
df <- read.table(text=readClipboard(),sep="|",h=TRUE,colClasses = "character")
df
df <- read.table(text=readClipboard(),sep="|",h=TRUE,colClasses = "character",strip.white = TRUE)
df
df <- read.table(text=readClipboard(),sep="|",h=TRUE,colClasses = "character",strip.white = TRUE,stringsAsFactors = FALSE)
df
reshape(df,v.names = "Person",idvar = "Reference")
reshape(df,v.names = "Person",idvar = "Reference",direction = "wide")
reshape(df,timevar = "Person",idvar = "Reference",direction = "wide")
reshape(df,timevar = "Person",idvar = "Reference",direction = "wide",v.names = "Status")
reshape(df,timevar = "Person",idvar = "Reference",direction = "wide",v.names = "Person")
reshape(df,timevar = "Person",idvar = "Reference",direction = "wide",v.names = "DOB")
reshape(df,timevar = "Person",idvar = "Reference",direction = "wide",v.names = c("DOB","Status"))
reshape(df,timevar = "Person",idvar = "Reference",direction = "wide",v.names = c("DOB","Address"))
reshape(df[],timevar = "Person",idvar = "Reference",direction = "wide",v.names = c("DOB","Address"))
df
reshape(df[-4],timevar = "Person",idvar = "Reference",direction = "wide",v.names = c("DOB","Address"))
reshape(df[-4],timevar = "Person",idvar = "Reference",direction = "wide")
library(stats102A)
stats102A::
stats102A::convt2list
convt2list <- function(dat, keep_par_names = FALSE){
if(is.data.frame(dat))
unname(by(dat,1:nrow(dat),.mklst, keep_par_names))
else dat
}
.compare <- function(student_file, fun_name, test_data,weight,keep_par_names){
stud_env <- new.env()
test_data <- convt2list(test_data,keep_par_names)
studentID <- sub("\\D+$","",s_base <- basename(student_file))
if(!nchar(studentID)) studentID <- s_base
scr <- try(source(student_file,stud_env),TRUE)
if (is(scr,"try-error")){
return( list(grade=0,remark = "can not source your file"))
}
if(!exists(fun_name, stud_env,inherits = FALSE,mode = "function")){
return (list(ID = studentID,grade = 0,
remark = paste("You are missing the", fun_name, "function")))
}
else{
stud_fun <-  get0(fun_name,stud_env,'function',FALSE)
teach_fun <- get0(fun_name,.teacher,'function',FALSE)
if(length(formalArgs(teach_fun))!=length(test_data[[1]]))
stop("Incorrect number of arguments for the test data as compared to the function")
n <- .comp(test_data[[1]],stud_fun,teach_fun)
if(is.list(n)) return(c(ID = studentID,n))
val <- c(n,if(length(test_data)>1) sapply(test_data[-1], .comp,stud_fun, teach_fun))
remark = ""
if(any(!val)) {
not_work <- unlist(sample(test_data[!val],1))
remark <- paste("Your",fun_name,
"could not work on some data like",toString(not_work))
}
list(ID = studentID, grade = mean(val),remark = remark)
}
}
test_function <- function(test_dat, studentFUN, correctFUN, class_value = "numeric"){
test_dat <- convt2list(test_dat)
all(sapply(test_dat, .comp,studentFUN, correctFUN, class_value))
}
grade_Rscripts <- function(student_dir,teacher_file,
function_test_data,weight = 1,keep_par_names = FALSE){
source(teacher_file,.teacher)
student_files <- list.files(student_dir,"\\.R$",ignore.case = TRUE,
recursive = TRUE,full.names = TRUE)
functions_to_test <- names(function_test_data)
nm <- names(weight)
weight[setdiff(functions_to_test,nm)] <- if(length(nm)==1) weight else 1
.finalize <- function(f){
re <-lapply(student_files,.compare,f,
function_test_data[[f]], weight, keep_par_names)
cbind(func = f,do.call(rbind.data.frame,re))
}
do.call(rbind,lapply(functions_to_test,.finalize))
}
library(stats102A)
stats102A::convt2list
library(stats102A)
tst <- data.frame(t(matrix(c(1071,462,
18678,120,
24,60,
30,24,
98,99,
0,10,
33,121,
432,1452,
462,1452,
-3,5),ncol = 2,byrow=T)))
tst <- list(gcd = unname(lapply(tst,as.list)))
gradeRScripts("../students/","987654321_stat102a_test.R",tst)
stats102A::gradeRScripts("../students/","987654321_stat102a_test.R",tst)
stats102A::gradeRscripts("../students/","987654321_stat102a_test.R",tst)
stats102A::grade_Rscripts("../students/","987654321_stat102a_test.R",tst)
grade_Rscripts("testthat/students/","987654321_stat102a_test.R",tst)
devtools::uses_testthat()
devtools::uses_testthat()
library(stats102A)
convt2list(tst)
tst <- data.frame(t(matrix(c(1071,462,
18678,120,
24,60,
30,24,
98,99,
0,10,
33,121,
432,1452,
462,1452,
-3,5),ncol = 2,byrow=T)))
tst
convt2list(tst)
convt2list(tst,TRUE)
convt2list(tst)
tst <- data.frame((matrix(c(1071,462,
18678,120,
24,60,
30,24,
98,99,
0,10,
33,121,
432,1452,
462,1452,
-3,5),ncol = 2,byrow=T)))
convt2list(tst,TRUE)
tst <- data.frame(matrix(c(1071,462,
18678,120,
24,60,
30,24,
98,99,
0,10,
33,121,
432,1452,
462,1452,
-3,5),ncol = 2,byrow=T))
tst <- list(gcd = convt2list(tst))
tst
grade_Rscripts("testthat/students/","987654321_stat102a_test.R",tst)
grade_Rscripts("testthat/students/","testthat/987654321_stat102a_test.R",tst)
stats102A::convt2list
stats102A::grade_Rscripts
library(stats102A)
grade_Rscripts("testthat/students/","testthat/987654321_stat102a_test.R",tst)
convt2list <- function(x)x
convt2list <- function(x,y,z)x
convt2list <- function(x,y,z)x+y+z
test1 <- function(x,y)x
test2 <- function(x,y) y + x
correct <- function(a,b) a + b
add_data <- list(list(10,20),list(0,-3))
(test_function(add_data, test1, correct))
convt2list <- function(x)stopifnot(is.numeric(x))
test1 <- function(x,y)x
test2 <- function(x,y) y + x
correct <- function(a,b) a + b
add_data <- list(list(10,20),list(0,-3))
(test_function(add_data, test1, correct))
library(stats102A)
devtools::uses_testthat()
tst <- data.frame(matrix(c(1071,462,
18678,120,
24,60,
30,24,
98,99,
0,10,
33,121,
432,1452,
462,1452,
-3,5),ncol = 2,byrow=T))
tst <- list(gcd = convt2list(tst))
grade_Rscripts("testthat/students/","testthat/987654321_stat102a_test.R",tst)
devtools::load_all(".")
warnings()
devtools::load_all(".")
grade_Rscripts("testthat/students/","testthat/987654321_stat102a_test.R",tst)
devtools::load_all(".")
grade_Rscripts("testthat/students/","testthat/987654321_stat102a_test.R",tst)
devtools::load_all(".")
library(stats102A)
tst <- data.frame(matrix(c(1071,462,
18678,120,
24,60,
30,24,
98,99,
0,10,
33,121,
432,1452,
462,1452,
-3,5),ncol = 2,byrow=T))
tst <- list(gcd = convt2list(tst))
grade_Rscripts("testthat/students/","testthat/987654321_stat102a_test.R",tst)
tst1 <- list(gcd = convt2list(tst))
tst <- data.frame(matrix(c(1071,462,
18678,120,
24,60,
30,24,
98,99,
0,10,
33,121,
432,1452,
462,1452,
-3,5),ncol = 2,byrow=T))
tst
z<-c(42,60,36,3,7,66,66,112,10)
tst1 <- list(gcd = convt2list(tst),GCD = convt2list(cbind(tst,z = c(42,60,36,3,7,66,66,112,10))))
convt2list(cbind(tst,z = c(42,60,36,3,7,66,66,112,10)))
convt2list(cbind(tst,z = c(42,60,100,36,3,7,66,66,112,10)))
tst1 <- list(gcd = convt2list(tst),GCD = convt2list(cbind(tst,z = c(42,60,100,36,3,7,66,66,112,10))))
grade_Rscripts("testthat/students/","testthat/987654321_stat102a_test.R",tst1)
?install.packages()
install.packages("..",repos=NULL)
".."
dir("..")
install.packages(".",repos=NULL)
devtools::check_built()
devtools::check_built(".")
devtools::load_all(".")
stats102A::library.dynam.unload()
stats102A::library.dynam.unload("is")
stats102A::library.dynam.unload("stats102A::is")
stats102A::library.dynam.unload("stats102A:is")
stats102A::library.dynam.unload("stats102A")
devtools::load_all(".")
devtools::load_all(".")
?devtools::load_all(".")
devtools::load_all(".",export_all = FALSE)
library("stats102A")
type.convert(letters[1:5])
type.convert(letters[1:5],a.is=T)
type.convert(letters[1:5],as.is=T)
library(stats102A)
tst <- data.frame(matrix(c(1071,462,
18678,120,
24,60,
30,24,
98,99,
0,10,
33,121,
432,1452,
462,1452,
-3,5),ncol = 2,byrow=T))
tst <- list(gcd = convt2list(tst),
GCD = convt2list(cbind(tst,c(42,30,100,36,77,13,69,18,54,4))))
library(stats102A)
tst <- list(gcd = convt2list(tst),
GCD = convt2list(cbind(tst,c(42,30,100,36,77,13,69,18,54,4))))
grade_Rscripts("students/","987654321_stat102a_test.R",tst)
getwd()
grade_Rscripts("students/","987654321_stat102a_test.R",tst)
grade_Rscripts("tests/testthat/students/","tests/testthat/987654321_stat102a_test.R",tst)
